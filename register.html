<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Register - Algeria University</title>
    <link rel="stylesheet" href="style.css">
    <script defer src="script.js"></script>
    <link rel="icon" href="/logo.png" type="image/png">
</head>
<body>
    <header>
        <div class="container">
            <!-- Hamburger Menu Toggle -->
            <div class="menu-toggle" onclick="toggleMenu()">
                <span></span>
                <span></span>
                <span></span>
            </div>
            <nav>
                <ul class="nav-links">
                    <li><a href="Ondes_Et_Vibrations.html">Ondes Et Vibrations</a></li>
                    <li><a href="/informatique1.html">Informatique 1</a></li>
                    <li><a href="/informatique2.html">Informatique 2 (Algorithm)</a></li>
                    <li><a href="/electroniquef1.html">Electronique fondamentale 1</a></li>
                    <!-- More Dropdown for Desktop -->
                    <li class="dropdown more-dropdown">
                        <a href="javascript:void(0)" class="dropbtn" onclick="toggleDropdown(event)">More</a>
                        <ul class="dropdown-content more-dropdown-content">
                            <li><a href="/informatique3.html">Informatique 3</a></li>
                            <li><a href="/statistique.html">Probabilité et Statistique S3</a></li>
                            <li><a href="/specialization Page/specialization.html">Cours</a></li>
                            <li><a href="/quadripole.html">Les Quadripôles</a></li>
                            <li><a href="/systemesasservis.html">Systèmes Asservis</a></li>
                            <li><a href="/Theorie_du_signal.html">Theorie du signal</a></li>
                            <li><a href="/Logique_Combinatoire_et_Séquentielle.html">Logique Combinatoire et Séquentielle</a></li>
                            <li><a href="/Electrotechnique_fondamentale1.html">Electrotechnique fondamentale 1</a></li>
                            <li><a href="/reseaux_electriques.html">Réseaux Électriques L3</a></li>
                            <li><a href="/methodenumerique.html">Méthodes Numériques (L2 + M1)</a></li>
                            <li><a href="/Machine_electrique.html">Machines électriques (L2, L3, M1)</a></li>
                        </ul>
                    </li>
                    <li><a href="index.html">Login</a></li>
                </ul>
            </nav>
        </div>
    </header>

    <div class="register-container">
        <h2>Register</h2>
        <input type="text" id="contact" placeholder="Email or Phone Number" required>

        <!-- Dropdown for selecting series -->
        <select id="series" required>
            <option value="" disabled selected>Select Series</option>
            <option value="Ondes_Et_Vibrations">Ondes Et Vibrations</option>
            <option value="Informatique_1">Informatique 1</option>
            <option value="Informatique_2">Informatique 2 (Algorithm)</option>
            <option value="Electronique_fondamentale_1">Electronique fondamentale 1</option>
            <option value="Informatique_3">Informatique 3</option>
            <option value="Statistique">Probabilité et Statistique S3</option>
            <option value="Cours">Cours</option>
            <option value="Quadripole">Les Quadripôles</option>
            <option value="Systemes_Asservis">Systèmes Asservis</option>
            <option value="Theorie_du_signal">Theorie du signal</option>
            <option value="Logique_Combinatoire">Logique Combinatoire et Séquentielle</option>
            <option value="Electrotechnique_fondamentale_1">Electrotechnique fondamentale 1</option>
            <option value="Reseaux_Electriques">Réseaux Électriques L3</option>
            <option value="Methodenumerique">Méthodes Numériques (L2 + M1)</option>
            <option value="Machines_electriques">Machines électriques (L2, L3, M1)</option>
        </select>

        <!-- File upload -->
        <input type="file" id="fileUpload" accept=".pdf, .jpg, .jpeg, .png" required>
        
        <button onclick="registerUser()">Register</button>
        <p id="result"></p>
        <p>Already have an account? <a href="index.html">Login here</a></p>
    </div>

    <footer>
        <p>&copy; 2024 Algeria University™. All rights reserved.</p>
    </footer>

    <script>
      function registerUser() {
    const contact = document.getElementById("contact").value;
    const series = document.getElementById("series").value;
    const file = document.getElementById("fileUpload").files[0];

    if (!contact || !series || !file) {
        document.getElementById("result").innerText = "Please fill in all fields.";
        return;
    }

    const formData = new FormData();
    formData.append("contact", contact);
    formData.append("series", series);
    formData.append("file", file); // Ensure this is a file input

    const scriptURL = "https://script.google.com/macros/s/AKfycbyQbm68xFzLqGFdFZug9HyxiRqbDP_Ke9Y6j057t7zKqhHahsOmfIcnlnHK6PqLkKW6/exec"; // Your updated Google Apps Script URL

    fetch(scriptURL, {
        method: "POST",
        body: formData
    })
    .then(response => response.json())
    .then(result => {
        console.log("Result from script:", result);
        if (result.access) {
            document.getElementById("result").innerText = "Registration successful!";
            document.getElementById("contact").value = "";
            document.getElementById("series").selectedIndex = 0;
            document.getElementById("fileUpload").value = "";
        } else {
            document.getElementById("result").innerText = "Registration failed. Try again.";
        }
    })
    .catch(error => {
        console.error("Error:", error);
        document.getElementById("result").innerText = "An error occurred. Please try again.";
    });
}

        
    </script>

</body>
</html>
